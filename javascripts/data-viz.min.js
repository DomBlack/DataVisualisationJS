!function e(t,n,o){function a(r,s){if(!n[r]){if(!t[r]){var c="function"==typeof require&&require;if(!s&&c)return c(r,!0);if(i)return i(r,!0);var d=new Error("Cannot find module '"+r+"'");throw d.code="MODULE_NOT_FOUND",d}var u=n[r]={exports:{}};t[r][0].call(u.exports,function(e){var n=t[r][1][e];return a(n?n:e)},u,u.exports,e,t,n,o)}return n[r].exports}for(var i="function"==typeof require&&require,r=0;r<o.length;r++)a(o[r]);return a}({1:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var a=e("./reader/stringReader"),i=o(a),r=e("./reader/fileReader"),s=o(r),c=e("./render/pointCloud"),d=o(c);window.pointCloud=d["default"],s["default"](c.getDOM()),window.strPointCloud=function(e,t){d["default"](e,i["default"](rfc))}},{"./reader/fileReader":3,"./reader/stringReader":4,"./render/pointCloud":6}],2:[function(e,t,n){"use strict";function o(e,t,n,o){return e*o*o+t*o+n}function a(e,t){var n=Math.floor(e/(t*t)),o=Math.floor(e/t)%t,a=e%t;return[n,o,a]}Object.defineProperty(n,"__esModule",{value:!0}),n.toIndex=o,n.fromIndex=a},{}],3:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function a(e){var t=new FileReader;t.onloadend=function(t){if(t.target.readyState==FileReader.DONE){var n=t.target.result,o=c["default"](n);u["default"](e.name,o)}},t.readAsBinaryString(e)}function i(e){e.stopPropagation(),e.preventDefault();for(var t,n=e.dataTransfer.files,o=0;t=n[o];o++)a(t)}function r(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"}Object.defineProperty(n,"__esModule",{value:!0});var s=e("./stringReader"),c=o(s),d=e("../render/pointCloud"),u=o(d);n["default"]=function(e){window.File&&window.FileReader&&window.FileList&&window.Blob?(e.addEventListener("dragover",r,!1),e.addEventListener("drop",i,!1)):console.error("The File APIs are not fully supported in this browser.")},t.exports=n["default"]},{"../render/pointCloud":6,"./stringReader":4}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("../coords"),a=1,i=Math.floor(256/a);n["default"]=function(e){for(var t=new Array(i*i*i),n=2;n<e.length;n+=3){var r=Math.floor(e.charCodeAt(n-2)/a),s=Math.floor(e.charCodeAt(n-1)/a),c=Math.floor(e.charCodeAt(n)/a),d=o.toIndex(r,s,c,i);t[d]=(t[d]||0)+1}return t},t.exports=n["default"]},{"../coords":2}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),THREE.OrbitControls=function(e,t){function n(){return 2*Math.PI/60/60*E.autoRotateSpeed}function o(){return Math.pow(.95,E.zoomSpeed)}function a(e){if(E.enabled!==!1){if(e.preventDefault(),e.button===E.mouseButtons.ORBIT){if(E.noRotate===!0)return;z=N.ROTATE,f.set(e.clientX,e.clientY)}else if(e.button===E.mouseButtons.ZOOM){if(E.noZoom===!0)return;z=N.DOLLY,M.set(e.clientX,e.clientY)}else if(e.button===E.mouseButtons.PAN){if(E.noPan===!0)return;z=N.PAN,g.set(e.clientX,e.clientY)}z!==N.NONE&&(document.addEventListener("mousemove",i,!1),document.addEventListener("mouseup",r,!1),E.dispatchEvent(_))}}function i(e){if(E.enabled!==!1){e.preventDefault();var t=E.domElement===document?E.domElement.body:E.domElement;if(z===N.ROTATE){if(E.noRotate===!0)return;v.set(e.clientX,e.clientY),b.subVectors(v,f),E.rotateLeft(2*Math.PI*b.x/t.clientWidth*E.rotateSpeed),E.rotateUp(2*Math.PI*b.y/t.clientHeight*E.rotateSpeed),f.copy(v)}else if(z===N.DOLLY){if(E.noZoom===!0)return;O.set(e.clientX,e.clientY),H.subVectors(O,M),H.y>0?E.dollyIn():H.y<0&&E.dollyOut(),M.copy(O)}else if(z===N.PAN){if(E.noPan===!0)return;y.set(e.clientX,e.clientY),T.subVectors(y,g),E.pan(T.x,T.y),g.copy(y)}z!==N.NONE&&E.update()}}function r(){E.enabled!==!1&&(document.removeEventListener("mousemove",i,!1),document.removeEventListener("mouseup",r,!1),E.dispatchEvent(I),z=N.NONE)}function s(e){if(E.enabled!==!1&&E.noZoom!==!0&&z===N.NONE){e.preventDefault(),e.stopPropagation();var t=0;void 0!==e.wheelDelta?t=e.wheelDelta:void 0!==e.detail&&(t=-e.detail),t>0?E.dollyOut():0>t&&E.dollyIn(),E.update(),E.dispatchEvent(_),E.dispatchEvent(I)}}function c(e){if(E.enabled!==!1&&E.noKeys!==!0&&E.noPan!==!0)switch(e.keyCode){case E.keys.UP:E.pan(0,E.keyPanSpeed),E.update();break;case E.keys.BOTTOM:E.pan(0,-E.keyPanSpeed),E.update();break;case E.keys.LEFT:E.pan(E.keyPanSpeed,0),E.update();break;case E.keys.RIGHT:E.pan(-E.keyPanSpeed,0),E.update()}}function d(e){if(E.enabled!==!1){switch(e.touches.length){case 1:if(E.noRotate===!0)return;z=N.TOUCH_ROTATE,f.set(e.touches[0].pageX,e.touches[0].pageY);break;case 2:if(E.noZoom===!0)return;z=N.TOUCH_DOLLY;var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(t*t+n*n);M.set(0,o);break;case 3:if(E.noPan===!0)return;z=N.TOUCH_PAN,g.set(e.touches[0].pageX,e.touches[0].pageY);break;default:z=N.NONE}z!==N.NONE&&E.dispatchEvent(_)}}function u(e){if(E.enabled!==!1){e.preventDefault(),e.stopPropagation();var t=E.domElement===document?E.domElement.body:E.domElement;switch(e.touches.length){case 1:if(E.noRotate===!0)return;if(z!==N.TOUCH_ROTATE)return;v.set(e.touches[0].pageX,e.touches[0].pageY),b.subVectors(v,f),E.rotateLeft(2*Math.PI*b.x/t.clientWidth*E.rotateSpeed),E.rotateUp(2*Math.PI*b.y/t.clientHeight*E.rotateSpeed),f.copy(v),E.update();break;case 2:if(E.noZoom===!0)return;if(z!==N.TOUCH_DOLLY)return;var n=e.touches[0].pageX-e.touches[1].pageX,o=e.touches[0].pageY-e.touches[1].pageY,a=Math.sqrt(n*n+o*o);O.set(0,a),H.subVectors(O,M),H.y>0?E.dollyOut():H.y<0&&E.dollyIn(),M.copy(O),E.update();break;case 3:if(E.noPan===!0)return;if(z!==N.TOUCH_PAN)return;y.set(e.touches[0].pageX,e.touches[0].pageY),T.subVectors(y,g),E.pan(T.x,T.y),g.copy(y),E.update();break;default:z=N.NONE}}}function l(){E.enabled!==!1&&(E.dispatchEvent(I),z=N.NONE)}this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new THREE.Vector3,this.center=this.target,this.noZoom=!1,this.zoomSpeed=1,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.noRotate=!1,this.rotateSpeed=1,this.noPan=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-(1/0),this.maxAzimuthAngle=1/0,this.noKeys=!1,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:THREE.MOUSE.LEFT,ZOOM:THREE.MOUSE.MIDDLE,PAN:THREE.MOUSE.RIGHT};var h,p,E=this,m=1e-6,f=new THREE.Vector2,v=new THREE.Vector2,b=new THREE.Vector2,g=new THREE.Vector2,y=new THREE.Vector2,T=new THREE.Vector2,R=new THREE.Vector3,w=new THREE.Vector3,M=new THREE.Vector2,O=new THREE.Vector2,H=new THREE.Vector2,P=0,x=0,C=1,L=new THREE.Vector3,j=new THREE.Vector3,A=new THREE.Quaternion,N={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},z=N.NONE;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom;var D=(new THREE.Quaternion).setFromUnitVectors(e.up,new THREE.Vector3(0,1,0)),S=D.clone().inverse(),k={type:"change"},_={type:"start"},I={type:"end"};this.rotateLeft=function(e){void 0===e&&(e=n()),x-=e},this.rotateUp=function(e){void 0===e&&(e=n()),P-=e},this.panLeft=function(e){var t=this.object.matrix.elements;R.set(t[0],t[1],t[2]),R.multiplyScalar(-e),L.add(R)},this.panUp=function(e){var t=this.object.matrix.elements;R.set(t[4],t[5],t[6]),R.multiplyScalar(e),L.add(R)},this.pan=function(e,t){var n=E.domElement===document?E.domElement.body:E.domElement;if(E.object instanceof THREE.PerspectiveCamera){var o=E.object.position,a=o.clone().sub(E.target),i=a.length();i*=Math.tan(E.object.fov/2*Math.PI/180),E.panLeft(2*e*i/n.clientHeight),E.panUp(2*t*i/n.clientHeight)}else E.object instanceof THREE.OrthographicCamera?(E.panLeft(e*(E.object.right-E.object.left)/n.clientWidth),E.panUp(t*(E.object.top-E.object.bottom)/n.clientHeight)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.")},this.dollyIn=function(e){void 0===e&&(e=o()),E.object instanceof THREE.PerspectiveCamera?C/=e:E.object instanceof THREE.OrthographicCamera?(E.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom*e)),E.object.updateProjectionMatrix(),E.dispatchEvent(k)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.")},this.dollyOut=function(e){void 0===e&&(e=o()),E.object instanceof THREE.PerspectiveCamera?C*=e:E.object instanceof THREE.OrthographicCamera?(E.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/e)),E.object.updateProjectionMatrix(),E.dispatchEvent(k)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.")},this.getScale=function(){return Math.round(w.length()*C)},this.update=function(){var e=this.object.position;w.copy(e).sub(this.target),w.applyQuaternion(D),h=Math.atan2(w.x,w.z),p=Math.atan2(Math.sqrt(w.x*w.x+w.z*w.z),w.y),this.autoRotate&&z===N.NONE&&this.rotateLeft(n()),h+=x,p+=P,h=Math.max(this.minAzimuthAngle,Math.min(this.maxAzimuthAngle,h)),p=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,p)),p=Math.max(m,Math.min(Math.PI-m,p));var t=w.length()*C;t=Math.max(this.minDistance,Math.min(this.maxDistance,t)),this.target.add(L),w.x=t*Math.sin(p)*Math.sin(h),w.y=t*Math.cos(p),w.z=t*Math.sin(p)*Math.cos(h),w.applyQuaternion(S),e.copy(this.target).add(w),this.object.lookAt(this.target),x=0,P=0,C=1,L.set(0,0,0),(j.distanceToSquared(this.object.position)>m||8*(1-A.dot(this.object.quaternion))>m)&&(this.dispatchEvent(k),j.copy(this.object.position),A.copy(this.object.quaternion))},this.reset=function(){z=N.NONE,this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(k),this.update()},this.getPolarAngle=function(){return p},this.getAzimuthalAngle=function(){return h},this.domElement.addEventListener("contextmenu",function(e){e.preventDefault()},!1),this.domElement.addEventListener("mousedown",a,!1),this.domElement.addEventListener("mousewheel",s,!1),this.domElement.addEventListener("DOMMouseScroll",s,!1),this.domElement.addEventListener("touchstart",d,!1),this.domElement.addEventListener("touchend",l,!1),this.domElement.addEventListener("touchmove",u,!1),window.addEventListener("keydown",c,!1),this.update()},THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.OrbitControls.prototype.constructor=THREE.OrbitControls,n["default"]=THREE.OrbitControls,t.exports=n["default"]},{}],6:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function a(){M=document.createElement("div"),M.className="label",M.innerHTML="&nbsp;",document.body.appendChild(M)}function i(){O=document.createElement("button"),O.innerHTML="  Toggle Rotation  ",O.style.position="absolute",O.style.padding="10px",O.style.right="5px",O.style.top="5px",document.body.appendChild(O)}function r(){return v?!1:(v=new THREE.Scene,y=new THREE.WebGLRenderer,b=new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,1,1e3),b.position.y=200,b.position.z=500,b.lookAt(x),g=new E["default"](b,y.domElement),g.target=x,g.autoRotate=!0,g.autoRotateSpeed=4,g.noPan=!1,g.keyPanSpeed=50,g.maxDistance=P,document.body.appendChild(y.domElement),a(),i(),document.body.appendChild(f.domElement),s(),window.addEventListener("resize",s,!0),O.addEventListener("click",function(e){g.autoRotate=!g.autoRotate,e.preventDefault()}),O.addEventListener("touchstart",function(e){g.autoRotate=!g.autoRotate,e.preventDefault()}),c(),!0)}function s(){b.aspect=window.innerWidth/window.innerHeight,b.updateProjectionMatrix(),y.setSize(window.innerWidth,window.innerHeight)}function c(){if(f.begin(),L!=g.getScale()){L=g.getScale();for(var e=1+(P-L)/P*15,t=0;t<H.length;t++){v.remove(H[t]);var n=H[t].material;n.size=Math.max(1,C*e/n.numPoints*n.numOffset*e),v.add(H[t])}}g.update(),y.render(v,b),f.end(),requestAnimationFrame(c)}function d(e,t){w&&v.remove(w),T=new THREE.Geometry;var n=250/t,o=n*Math.floor(t/2),a=(t-1)*n,i=new THREE.BoxGeometry(a,a,a),r=new THREE.MeshBasicMaterial;R=new THREE.Mesh(i,r),w=new THREE.BoxHelper(R),w.material.color.set(5570815),v.add(w);for(var s={},c=[],d=0,l=0;l<e.length;l++){var h=e[l];if(!(0>=h||void 0===h||null===h)){var p=s[h];p||(p=s[h]={size:h,points:0,geo:new THREE.Geometry},c.push(p));var E=new THREE.Vector3,f=m.fromIndex(l,t);E.x=f[0]*n-o,E.y=f[1]*n-o,E.z=f[2]*n-o,p.geo.vertices.push(E),p.points++,d++}}for(var l=0;l<H.length;l++)v.remove(H[l]);H=[];var b=0;c.sort(function(e,t){return e.size-t.size});for(var l=0;l<c.length;l++){b+=c[l].points;var g=l/(c.length-1),o=b/d,y=new THREE.PointCloudMaterial({color:u(240-240*g),size:Math.max(1,C/d*o),opacity:.75,sizeAttenuation:!1,transparent:!0});y.numPoints=d,y.numOffset=o;var M=new THREE.PointCloud(c[l].geo,y);H.push(M),v.add(M)}}function u(e){var t=e/60,n=t%2-1,o=1-Math.abs(n),a=0,i=0,r=0;return 1>t?(a=1,i=o):2>t?(a=o,i=1):3>t?(i=1,r=o):4>t?(i=o,r=1):5>t?(a=o,r=1):(a=1,r=o),new THREE.Color(255*a,255*i,255*r)}function l(){return r(),y.domElement}function h(e){return e.replace(/[^]/g,function(e){return"&#"+e.charCodeAt(0)+";"})}Object.defineProperty(n,"__esModule",{value:!0}),n.getDOM=l;var p=e("./orbitControls"),E=o(p),m=e("../coords"),f=new Stats;f.setMode(0),f.domElement.style.position="absolute",f.domElement.style.left="5px",f.domElement.style.top="5px";{var v,b,g,y,T,R,w,M,O,H=[],P=450,x=new THREE.Vector3(0,-30,0),C=75,L=0;new THREE.Color(1,0,0),new THREE.Color(0,1,0),new THREE.Color(0,0,1)}window.linearColours=!0,n["default"]=function(e,t){r(),M.innerHTML="File: "+h(e),d(t,Math.cbrt(t.length))}},{"../coords":2,"./orbitControls":5}]},{},[1]);